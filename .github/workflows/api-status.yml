name: api-status

on:
  schedule:
    - cron: 15/45 * * * *

env:
  SLACK_API_TOKEN_WORKSPACE_MAIN: ${{ secrets.SLACK_API_TOKEN_WORKSPACE_MAIN }}
  SLACK_API_TOKEN_WORKSPACE_BOT: ${{ secrets.SLACK_API_TOKEN_WORKSPACE_BOT }}

jobs:
  print_jobs:
    name: check-api-statuses
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: friends-library-dev/action-ts-pack/actions/api-status@master
        with:
          flp_api_status_query_token: ${{ secrets.FLP_API_STATUS_QUERY_TOKEN }}
          flp_api_endpoint: ${{ secrets.PROD_PRINT_JOBS_ACTION_FLP_API_ENDPOINT }}
          gertrude_api_endpoint: ${{ secrets.GERTRUDE_API_ENDPOINT }}
